import{A as B,B as ot,C as D,D as it,L as nt,M as at,O as ct,Q as st,R as dt,a as G,b as L,c as Y,ca as pt,l as k,m as J,n as N,o as K,p as W,q as X,s as Z,t as tt,v as A,w as et,x as rt,y as v}from"./chunk-ADH6MA7O.js";import{$ as S,Db as I,Gb as w,Hc as $,Ib as l,Ic as F,Jc as q,Mc as j,Nc as Q,Pb as V,Qb as n,Rb as u,Sb as M,Ta as E,Wa as a,Xa as d,Zb as H,_ as z,_b as x,ac as C,bc as U,da as R,ja as h,ka as O,mb as m,ob as s,ra as b,sa as y,xb as o,yb as i,zb as f}from"./chunk-7GFS32LZ.js";var mt=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=h({type:r,selectors:[["app-customer"]],decls:2,vars:0,template:function(e,c){e&1&&(o(0,"p"),n(1,"customer works!"),i())}})}}return r})();var _="http://localhost:8081/",T=(()=>{class r{constructor(t){this.http=t}createAuthorizationHeader(){return new G().set("Authorization","Bearer "+v.getToken())}getAllProducts(){return this.http.get(_+"api/customer/products",{headers:this.createAuthorizationHeader()})}getAllProductsByName(t){return this.http.get(_+`api/customer/search/${t}`,{headers:this.createAuthorizationHeader()})}addToCart(t){let e={productId:t,userId:v.getUserId()};return this.http.post(_+"api/customer/cart",e,{headers:this.createAuthorizationHeader()})}increaseProductQuantity(t){let e={productId:t,userId:v.getUserId()};return this.http.post(_+"api/customer/addition",e,{headers:this.createAuthorizationHeader()})}addCartByUserId(){let t=v.getUserId();return this.http.get(_+`api/customer/cart/${t}`,{headers:this.createAuthorizationHeader()})}applyCoupon(t){let e=v.getUserId();return this.http.get(_+`api/customer/coupon/${e}/${t}`,{headers:this.createAuthorizationHeader()})}static{this.\u0275fac=function(e){return new(e||r)(R(L))}}static{this.\u0275prov=z({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function _t(r,p){if(r&1){let t=I();o(0,"mat-card",3)(1,"div",4),f(2,"img",5),i(),o(3,"div",6)(4,"h3",7),n(5),i(),o(6,"p",8),n(7),i()(),f(8,"mat-divider"),o(9,"div",9)(10,"div",10)(11,"span",11),n(12,"Price:"),i(),o(13,"span",12),n(14),x(15,"currency"),i()(),o(16,"div",10)(17,"span",11),n(18,"Category:"),i(),o(19,"span",12),n(20),i()()(),f(21,"mat-divider"),o(22,"div",13)(23,"button",14),w("click",function(){let c=b(t).$implicit,g=l();return y(g.addToCart(c.id))}),n(24,"Add to Cart"),i()()()}if(r&2){let t=p.$implicit;a(2),s("src",t.processedImg||"assets/default-image.jpg",E),a(3),u(t.name),a(2),u(t.description||"No description available"),a(7),u(C(15,5,t.price,"INR","symbol")),a(6),u(t.name||"Uncategorized")}}var ut=(()=>{class r{constructor(t,e,c){this.customerService=t,this.fb=e,this.snackBar=c,this.products=[]}ngOnInit(){this.getAllProducts(),this.searchProductForm=this.fb.group({title:[null,[N.required]]})}getAllProducts(){this.products=[],this.customerService.getAllProducts().subscribe(t=>{t.forEach(e=>{e.img?e.processedImg="data:image/jpeg;base64,"+e.img:(console.warn(`Image data missing for product ID: ${e.id}`),e.processedImg="path/to/default/image.jpg"),this.products.push(e)})},t=>{console.error("Error fetching products:",t)})}submitForm(){this.products=[];let t=this.searchProductForm.get("title").value;this.customerService.getAllProductsByName(t).subscribe(e=>{e.forEach(c=>{c.img?c.processedImg="data:image/jpeg;base64,"+c.img:(console.warn(`Image data missing for product ID: ${c.id}`),c.processedImg="path/to/default/image.jpg"),this.products.push(c)})},e=>{console.error("Error fetching products:",e)})}addToCart(t){this.customerService.addToCart(t).subscribe(e=>{this.snackBar.open("Product added to cart successfully","Close",{duration:5e3})})}static{this.\u0275fac=function(e){return new(e||r)(d(T),d(A),d(D))}}static{this.\u0275cmp=h({type:r,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[[1,"container"],[1,"product-list"],["class","product-card","matRipple","",4,"ngFor","ngForOf"],["matRipple","",1,"product-card"],[1,"product-image"],["alt","Product Image",3,"src"],[1,"product-details"],["matLine","",1,"product-name"],["matLine","",1,"product-description"],[1,"product-info"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"actions"],["mat-button","","color","primary",1,"update-button",3,"click"]],template:function(e,c){e&1&&(o(0,"div",0)(1,"div",1),m(2,_t,25,9,"mat-card",2),i()()),e&2&&(a(2),s("ngForOf",c.products))},dependencies:[F,B,it,nt,j],styles:[".product-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;padding:20px;background-color:#f9f9f9}.product-card[_ngcontent-%COMP%]{width:calc(25% - 20px);max-width:300px;border-radius:8px;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease,box-shadow .3s ease;cursor:pointer}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 16px #0003}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{height:180px;overflow:hidden}.product-card[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-card[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]{padding:16px}.product-card[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-card[_ngcontent-%COMP%]   .product-details[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{font-size:14px;color:#666;line-height:1.4;height:40px;overflow:hidden;text-overflow:ellipsis}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{padding:16px}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:14px;margin-bottom:8px}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{color:#999;font-weight:500}.product-card[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{color:#333;font-weight:700}.product-card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:space-between}.product-card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}@media (max-width: 1024px){.product-card[_ngcontent-%COMP%]{width:calc(33.33% - 20px)}}@media (max-width: 768px){.product-card[_ngcontent-%COMP%]{width:calc(50% - 20px)}}@media (max-width: 480px){.product-card[_ngcontent-%COMP%]{width:100%}}"]})}}return r})();var bt=r=>({"text-blue-600":r});function yt(r,p){if(r&1){let t=I();o(0,"div",12)(1,"div",13),f(2,"img",14),i(),o(3,"div",15)(4,"div",16)(5,"div",17),n(6),i(),o(7,"div",18),n(8),x(9,"currency"),i()(),o(10,"div",19)(11,"button",20)(12,"mat-icon"),n(13,"remove_circle_outline"),i()(),o(14,"span",21),n(15),i(),o(16,"button",22),w("click",function(){let c=b(t).$implicit,g=l(2);return y(g.increaseQuantity(c.productId))}),o(17,"mat-icon"),n(18,"add_circle_outline"),i()()()()()}if(r&2){let t=p.$implicit;a(2),s("src",t.processedImg,E),a(3),s("ngClass",H(10,bt,t.highlighted)),a(),M(" ",t.productName," "),a(2),u(C(9,6,t.price,"INR","symbol")),a(3),s("disabled",t.quantity==1),a(4),u(t.quantity)}}function It(r,p){if(r&1&&(o(0,"div",23),n(1),i()),r&2){let t=l(2);a(),M(" Coupon Applied: ",t.order.couponName," ")}}function wt(r,p){r&1&&(o(0,"mat-error",30),n(1," This input is required "),i())}function Mt(r,p){if(r&1){let t=I();o(0,"div",24)(1,"form",25),w("ngSubmit",function(){b(t);let c=l(2);return y(c.applyCoupon())}),o(2,"div",26),f(3,"input",27),m(4,wt,2,0,"mat-error",28),i(),o(5,"button",29),n(6," Apply Coupon "),i()()()}if(r&2){let t,e=l(2);a(),s("formGroup",e.couponForm),a(3),s("ngIf",(t=e.couponForm.get("code"))==null?null:t.hasError("required"))}}function Pt(r,p){if(r&1&&(o(0,"div",2)(1,"div",3),m(2,yt,19,12,"div",4),o(3,"div",5)(4,"div",6),n(5),x(6,"currency"),i(),o(7,"div",7),n(8),x(9,"currency"),i(),m(10,It,2,1,"div",8),i(),o(11,"div",9)(12,"button",10),n(13," Place Order "),i()(),m(14,Mt,7,2,"div",11),i()()),r&2){let t=l();a(2),s("ngForOf",t.cartItems),a(3),M(" Total Amount: ",C(6,5,t.order.totalAmount,"INR","symbol")," "),a(3),M(" Amount: ",C(9,9,t.order.amount,"INR","symbol")," "),a(2),s("ngIf",t.order.couponName),a(4),s("ngIf",!t.order.couponName)}}function St(r,p){r&1&&(o(0,"div",31)(1,"mat-icon",32),n(2,"remove_shopping_cart"),i(),o(3,"span",33),n(4,"Nothing to see here...."),i()())}var gt=(()=>{class r{constructor(t,e,c,g){this.customerService=t,this.fb=e,this.snackBar=c,this.dialog=g,this.cartItems=[]}ngOnInit(){this.couponForm=this.fb.group({code:[null,[N.required]]}),this.getCart()}getCart(){this.cartItems=[],this.customerService.addCartByUserId().subscribe(t=>{console.log("API Response:",t),console.log("Cart Items:",t?.cartItemsDto),this.order=t,t?.cartItemsDto?.forEach(e=>{e.processedImg="data:image/jpeg;base64,"+e.returnedImg,this.cartItems.push(e)})},t=>{console.error("Error fetching cart items:",t)})}applyCoupon(){debugger;this.customerService.applyCoupon(this.couponForm.get(["code"]).value).subscribe(t=>{this.snackBar.open("Coupon Applied Successfully","Close",{duration:5e3}),this.getCart()},t=>{this.snackBar.open(t.error,"close",{duration:5e3})})}increaseQuantity(t){debugger;this.customerService.increaseProductQuantity(t).subscribe(e=>{this.snackBar.open("Product Quantity Increased.","Close",{duration:5e3}),this.getCart()})}static{this.\u0275fac=function(e){return new(e||r)(d(T),d(A),d(D),d(at))}}static{this.\u0275cmp=h({type:r,selectors:[["app-cart"]],decls:3,vars:2,consts:[["emptyCart",""],["class","p-4 bg-gray-100 min-h-screen",4,"ngIf","ngIfElse"],[1,"p-4","bg-gray-100","min-h-screen"],[1,"max-w-4xl","mx-auto","bg-white","shadow-lg","rounded-xl","p-6"],["class","flex flex-col md:flex-row items-center border-b py-4 transition-transform hover:scale-[1.01]",4,"ngFor","ngForOf"],[1,"text-right","mt-4"],[1,"text-xl","font-semibold","text-gray-800","border-t","pt-4"],[1,"text-lg","text-gray-600"],["class","text-lg text-green-600",4,"ngIf"],[1,"text-right","mt-6"],["mat-raised-button","","color","primary",1,"bg-blue-600","text-white","py-2","px-6","rounded-md","shadow-md","hover:bg-blue-700","transition-colors"],["class","bg-gray-50 p-4 mt-6 rounded-md shadow-inner",4,"ngIf"],[1,"flex","flex-col","md:flex-row","items-center","border-b","py-4","transition-transform","hover:scale-[1.01]"],[1,"w-full","md:w-24","h-24","flex-shrink-0","mb-4","md:mb-0"],["alt","product-image",1,"w-full","h-full","object-cover","rounded-md","shadow-sm",3,"src"],[1,"ml-0","md:ml-4","flex-grow","w-full"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","mb-2"],[1,"text-lg","font-semibold","text-gray-800",3,"ngClass"],[1,"text-gray-600","text-base"],[1,"flex","items-center","space-x-4"],["mat-icon-button","",1,"text-gray-500","hover:text-gray-800",3,"disabled"],[1,"text-gray-800"],["mat-icon-button","",1,"text-gray-500","hover:text-gray-800",3,"click"],[1,"text-lg","text-green-600"],[1,"bg-gray-50","p-4","mt-6","rounded-md","shadow-inner"],[1,"flex","flex-col","md:flex-row","items-center","space-y-4","md:space-y-0","md:space-x-4",3,"ngSubmit","formGroup"],[1,"flex-grow","w-full","md:w-auto"],["matInput","","type","text","placeholder","Enter Coupon Code","formControlName","code",1,"w-full","px-4","py-2","border","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["class","text-red-500 text-sm",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"bg-blue-600","text-white","py-2","px-4","rounded-md","shadow-md","hover:bg-blue-700","transition-colors"],[1,"text-red-500","text-sm"],[1,"flex","flex-col","items-center","justify-center","h-screen","text-center"],[1,"text-gray-400","text-6xl","mb-4"],[1,"text-gray-500","text-lg"]],template:function(e,c){if(e&1&&m(0,Pt,15,13,"div",1)(1,St,5,0,"ng-template",null,0,U),e&2){let g=V(2);s("ngIf",c.cartItems.length>0)("ngIfElse",g)}},dependencies:[$,F,q,X,J,K,W,Z,tt,B,ot,ct,st,dt,j]})}}return r})();var Ot=[{path:"",component:mt},{path:"dashboard",component:ut},{path:"cart",component:gt}],ft=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275mod=O({type:r})}static{this.\u0275inj=S({imports:[k.forChild(Ot),k]})}}return r})();var ne=(()=>{class r{static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275mod=O({type:r})}static{this.\u0275inj=S({imports:[Q,ft,et,rt,Y,pt]})}}return r})();export{ne as CustomerModule};
